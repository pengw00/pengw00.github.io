<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>David w00&#39;s Tech Road</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="David W00&apos;s Tech road!">
<meta property="og:type" content="website">
<meta property="og:title" content="David w00&#39;s Tech Road">
<meta property="og:url" content="http://pengw00.github.io/page/2/index.html">
<meta property="og:site_name" content="David w00&#39;s Tech Road">
<meta property="og:description" content="David W00&apos;s Tech road!">
<meta property="og:locale" content="us-EN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="David w00&#39;s Tech Road">
<meta name="twitter:description" content="David W00&apos;s Tech road!">
  
    <link rel="alternate" href="/atom.xml" title="David w00&#39;s Tech Road" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">David w00&#39;s Tech Road</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://pengw00.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-ACM-ICPC-Road-Map" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/31/ACM-ICPC-Road-Map/" class="article-date">
  <time datetime="2019-05-31T18:00:45.000Z" itemprop="datePublished">2019-05-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/31/ACM-ICPC-Road-Map/">ACM/ICPC Road Map</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="The-necessary-Topics-and-Algorithms"><a href="#The-necessary-Topics-and-Algorithms" class="headerlink" title="The necessary Topics and Algorithms."></a>The necessary Topics and Algorithms.</h3><p><img src="https://github.com/pengw00/pengw00.github.io/raw/master/image/Competitive-Programming.jpg" alt="image"></p>
<h4 id="Elementary-Data-structure"><a href="#Elementary-Data-structure" class="headerlink" title="Elementary Data structure"></a>Elementary Data structure</h4><ul>
<li>array</li>
<li>stack</li>
<li>queue</li>
<li>string</li>
<li>heap</li>
<li>hash</li>
</ul>
<h4 id="Advanced-Data-Structrue"><a href="#Advanced-Data-Structrue" class="headerlink" title="Advanced Data Structrue"></a>Advanced Data Structrue</h4><ul>
<li>Priority Queue</li>
<li>Binary Indexed Tree or Fenwick Tree</li>
<li>Segment Tree(RMQ, Range Sum and Lazy Propagation)</li>
<li>K-D tree(insert, minimum, delete)</li>
<li>Union Find Disjoint Set(cycle Detection and by range or path compression)</li>
<li>Tries</li>
<li>Interval Tree</li>
</ul>
<h4 id="Sorting-and-Search"><a href="#Sorting-and-Search" class="headerlink" title="Sorting and Search"></a>Sorting and Search</h4><ul>
<li>binary Search</li>
<li>Qucik Sort(Quick Select)</li>
<li>Merge Sort</li>
<li>Order Statistics</li>
</ul>
<h4 id="String-Manipulation"><a href="#String-Manipulation" class="headerlink" title="String Manipulation"></a>String Manipulation</h4><ul>
<li>KMP algorithm</li>
<li>Rabin Karp</li>
<li>Z’s algorithm</li>
<li>Aho Corasick String Matching</li>
</ul>
<h4 id="C-skillset"><a href="#C-skillset" class="headerlink" title="C++ skillset"></a>C++ skillset</h4><h4 id="Dynamic-Programming"><a href="#Dynamic-Programming" class="headerlink" title="Dynamic Programming"></a>Dynamic Programming</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Longest Common Subsequence</span><br><span class="line">Longest Increasing Subsequence</span><br><span class="line">Edit Distance</span><br><span class="line">Minimum Partition</span><br><span class="line">Ways to Cover a Distance</span><br><span class="line">Longest Path In Matrix</span><br><span class="line">Subset Sum Problem</span><br><span class="line">Optimal Strategy for a Game</span><br><span class="line">0-1 Knapsack Problem</span><br><span class="line">Assembly Line Scheduling</span><br><span class="line">Optimal Binary Search Tree</span><br></pre></td></tr></table></figure>
<h4 id="backtracking"><a href="#backtracking" class="headerlink" title="backtracking"></a>backtracking</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Rat in a Maze</span><br><span class="line">N Queen Problem</span><br><span class="line">Subset Sum</span><br><span class="line">m Coloring Problem</span><br><span class="line">Hamiltonian Cycle</span><br></pre></td></tr></table></figure>
<h4 id="Graph-Algorithms"><a href="#Graph-Algorithms" class="headerlink" title="Graph Algorithms"></a>Graph Algorithms</h4><p>One of the most important topic which you can not ignore if preparing for ACM – ICPC.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Breadth First Search (BFS)</span><br><span class="line">Depth First Search (DFS)</span><br><span class="line">Shortest Path from source to all vertices **Dijkstra**</span><br><span class="line">Shortest Path from every vertex to every other vertex **Floyd Warshall**</span><br><span class="line">Minimum Spanning tree **Prim**</span><br><span class="line">Minimum Spanning tree **Kruskal**</span><br><span class="line">Topological Sort</span><br><span class="line">Johnson’s algorithm</span><br><span class="line">Articulation Points (or Cut Vertices) in a Graph</span><br><span class="line">Bridges in a graph</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pengw00.github.io/2019/05/31/ACM-ICPC-Road-Map/" data-id="cjwjzm5ey000097zuf9nflhgg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/algorithm/">algorithm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-stepsToBuildSpringbootRESTAPI" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/31/stepsToBuildSpringbootRESTAPI/" class="article-date">
  <time datetime="2019-05-31T14:47:31.000Z" itemprop="datePublished">2019-05-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/31/stepsToBuildSpringbootRESTAPI/">stepsToBuildSpringbootRESTAPI</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li><p>Using <a href="http://start.spring.io" target="_blank" rel="noopener">http://start.spring.io</a> to initialize: web, jpa, mysql, devtools for basic dependency</p>
</li>
<li><p>Configure application.properties file</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">## Spring DATASOURCE (DataSourceAutoConfiguration &amp; DataSourceProperties)</span><br><span class="line">spring.datasource.url = jdbc:mysql://localhost:3306/notes_app?useSSL=false</span><br><span class="line">spring.datasource.username = root</span><br><span class="line">spring.datasource.password = root</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## Hibernate Properties</span><br><span class="line"># The SQL dialect makes Hibernate generate better SQL for the chosen database</span><br><span class="line">spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect</span><br><span class="line"></span><br><span class="line"># Hibernate ddl auto (create, create-drop, validate, update)</span><br><span class="line">spring.jpa.hibernate.ddl-auto = update</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>The last two properties are for hibernate. Spring Boot uses Hibernate as the default JPA implementation.</p>
<p>The property spring.jpa.hibernate.ddl-auto is used for database initialization. I’ve used the value “update” for this property.</p>
<p>It does two things -</p>
<ul>
<li><p>When you define a domain model, a table will automatically be created in the database and the fields of the domain model will be mapped to the corresponding columns in the table.</p>
</li>
<li><p>Any change to the domain model will also trigger an update to the table. For example, If you change the name or type of a field, or add another field to the model, then all these changes will be reflected in the mapped table as well.</p>
</li>
</ul>
<p>Using update for spring.jpa.hibernate.ddl-auto property is fine for development. But, For production, You should keep the value of this property to “validate”, and use a database migration tool like Flyway for managing changes in the database schema.</p>
<ul>
<li>Set up data model mapping to table</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package com.example.easynotes.model;</span><br><span class="line"></span><br><span class="line">import com.fasterxml.jackson.annotation.JsonIgnoreProperties;</span><br><span class="line">import org.springframework.data.annotation.CreatedDate;</span><br><span class="line">import org.springframework.data.annotation.LastModifiedDate;</span><br><span class="line">import org.springframework.data.jpa.domain.support.AuditingEntityListener;</span><br><span class="line">import javax.persistence.*;</span><br><span class="line">import javax.validation.constraints.NotBlank;</span><br><span class="line">import java.util.Date;</span><br><span class="line"></span><br><span class="line">@Entity</span><br><span class="line">@Table(name = &quot;notes&quot;)</span><br><span class="line">@EntityListeners(AuditingEntityListener.class)</span><br><span class="line">@JsonIgnoreProperties(value = &#123;&quot;createdAt&quot;, &quot;updatedAt&quot;&#125;, </span><br><span class="line">        allowGetters = true)</span><br><span class="line">public class Note implements Serializable &#123;</span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy = GenerationType.IDENTITY)</span><br><span class="line">    private Long id;</span><br><span class="line"></span><br><span class="line">    @NotBlank</span><br><span class="line">    private String title;</span><br><span class="line"></span><br><span class="line">    @NotBlank</span><br><span class="line">    private String content;</span><br><span class="line"></span><br><span class="line">    @Column(nullable = false, updatable = false)</span><br><span class="line">    @Temporal(TemporalType.TIMESTAMP)</span><br><span class="line">    @CreatedDate</span><br><span class="line">    private Date createdAt;</span><br><span class="line"></span><br><span class="line">    @Column(nullable = false)</span><br><span class="line">    @Temporal(TemporalType.TIMESTAMP)</span><br><span class="line">    @LastModifiedDate</span><br><span class="line">    private Date updatedAt;</span><br><span class="line"></span><br><span class="line">    // Getters and Setters ... (Omitted for brevity)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>annotated createdAt and updatedAt fields with @CreatedDate and @LastModifiedDate annotations respectively.</p>
<p>what we want is that these fields should automatically get populated whenever we create or update an entity.</p>
<p>To achieve this, we need to do two things -</p>
<ol>
<li><p>Add Spring Data JPA’s AuditingEntityListener to the domain model.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@EntityListeners(AuditingEntityListener.class)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Enable JPA Auditing in the main application.</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package com.example.easynotes;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.data.jpa.repository.config.EnableJpaAuditing;</span><br><span class="line"></span><br><span class="line">@SpringBootApplication</span><br><span class="line">@EnableJpaAuditing</span><br><span class="line">public class EasyNotesApplication &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(EasyNotesApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Creating-NoteRepository-to-access-data-from-the-database"><a href="#Creating-NoteRepository-to-access-data-from-the-database" class="headerlink" title="Creating NoteRepository to access data from the database"></a>Creating NoteRepository to access data from the database</h3><ol>
<li>Spring Data JPA with paRepository interface with methods for CRUD operations, First, Create a new package called repository inside the base package com.example.easynotes. Then, create an interface called NoteRepository and extend it from JpaRepository.<br>This is different from nodejs or golang. but why we need this interface. apparently it give us the method, which manipulate the java object in a collection. in mongodb, it is the schema!</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">package com.example.easynotes.repository;</span><br><span class="line"></span><br><span class="line">import com.example.easynotes.model.Note;</span><br><span class="line">import org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"></span><br><span class="line">@Repository</span><br><span class="line">public interface NoteRepository extends JpaRepository&lt;Note, Long&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Spring Data JPA has a bunch of other interesting features like Query methods (dynamically creating queries based on method names), Criteria API, Specifications, QueryDsl etc.<br>strongly recommend to checkout the Spring Data JPA’s documentation to learn more.</p>
<h3 id="Creating-Custom-Business-Exception"><a href="#Creating-Custom-Business-Exception" class="headerlink" title="Creating Custom Business Exception"></a>Creating Custom Business Exception</h3><p>The APIs will throw a ResourceNotFoundException whenever a Note with a given id is not found in the database.</p>
<p>Following is the definition of ResourceNotFoundException. (I’ve created a package named exception inside com.example.easynotes to store this exception class) -</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">package com.example.easynotes.exception;</span><br><span class="line"></span><br><span class="line">import org.springframework.http.HttpStatus;</span><br><span class="line">import org.springframework.web.bind.annotation.ResponseStatus;</span><br><span class="line"></span><br><span class="line">@ResponseStatus(value = HttpStatus.NOT_FOUND)</span><br><span class="line">public class ResourceNotFoundException extends RuntimeException &#123;</span><br><span class="line">    private String resourceName;</span><br><span class="line">    private String fieldName;</span><br><span class="line">    private Object fieldValue;</span><br><span class="line"></span><br><span class="line">    public ResourceNotFoundException( String resourceName, String fieldName, Object fieldValue) &#123;</span><br><span class="line">        super(String.format(&quot;%s not found with %s : &apos;%s&apos;&quot;, resourceName, fieldName, fieldValue));</span><br><span class="line">        this.resourceName = resourceName;</span><br><span class="line">        this.fieldName = fieldName;</span><br><span class="line">        this.fieldValue = fieldValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getResourceName() &#123;</span><br><span class="line">        return resourceName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getFieldName() &#123;</span><br><span class="line">        return fieldName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Object getFieldValue() &#123;</span><br><span class="line">        return fieldValue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Notice the use of @ResponseStatus annotation in the above exception class. This will cause Spring boot to respond with the specified HTTP status code whenever this exception is thrown from your controller.</p>
<h3 id="Creating-NoteController"><a href="#Creating-NoteController" class="headerlink" title="Creating NoteController"></a>Creating NoteController</h3><p>This is final step as router will wrap inside and mapping with the controller.<br>which is almost the same as nodejs rest api or golang api. but using anotation.  </p>
<p>First, create a new package controller inside com.example.easynotes. Then, create a new class NoteController.java with the following contents.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package com.example.easynotes.controller;</span><br><span class="line"></span><br><span class="line">import com.example.easynotes.exception.ResourceNotFoundException;</span><br><span class="line">import com.example.easynotes.model.Note;</span><br><span class="line">import com.example.easynotes.repository.NoteRepository;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.http.ResponseEntity;</span><br><span class="line">import org.springframework.web.bind.annotation.*;</span><br><span class="line">import javax.validation.Valid;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/api&quot;)</span><br><span class="line">public class NoteController &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    NoteRepository noteRepository;</span><br><span class="line"></span><br><span class="line">    // Get All Notes</span><br><span class="line"></span><br><span class="line">    // Create a new Note</span><br><span class="line"></span><br><span class="line">    // Get a Single Note</span><br><span class="line"></span><br><span class="line">    // Update a Note</span><br><span class="line"></span><br><span class="line">    // Delete a Note</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>@RestController annotation is a combination of Spring’s @Controller and @ResponseBody annotations.</p>
<p>The @Controller annotation is used to define a controller and the @ResponseBody annotation is used to indicate that the return value of a method should be used as the response body of the request.</p>
<p>@RequestMapping(“/api”) declares that the url for all the apis in this controller will start with /api.</p>
<p>Let’s now look at the implementation of all the apis one by one.</p>
<h4 id="1-Get-All-Notes-GET-api-notes"><a href="#1-Get-All-Notes-GET-api-notes" class="headerlink" title="1. Get All Notes (GET /api/notes)"></a>1. Get All Notes (GET /api/notes)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// Get All Notes</span><br><span class="line">@GetMapping(&quot;/notes&quot;)</span><br><span class="line">public List&lt;Note&gt; getAllNotes() &#123;</span><br><span class="line">    return noteRepository.findAll();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The above method is pretty straightforward. It calls JpaRepository’s findAll() method to retrieve all the notes from the database and returns the entire list.</p>
<p>Also, The @GetMapping(“/notes”) annotation is a short form of @RequestMapping(value=”/notes”, method=RequestMethod.GET).</p>
<h4 id="2-Create-a-new-Note-POST-api-notes"><a href="#2-Create-a-new-Note-POST-api-notes" class="headerlink" title="2. Create a new Note (POST /api/notes)"></a>2. Create a new Note (POST /api/notes)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping(&quot;/notes&quot;)</span><br><span class="line">public Note createNote(@Valid @RequestBody Note note)&#123;</span><br><span class="line">	return nodeRepository.save(note);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The @RequestBody annotation is used to bind the request body with a method parameter.<br>The @Valid annotation makes sure that the request body is valid. Remember, we had marked Note’s title and content with @NotBlank annotation in the Note model?<br>so if the req body does not have a title or content, then spring will return a 400 badrequest error to client. </p>
<h4 id="3-get-a-single-Note-get-api-note-id"><a href="#3-get-a-single-Note-get-api-note-id" class="headerlink" title="3. get a single Note(get/api/note/{id})"></a>3. get a single Note(get/api/note/{id})</h4><p>@GetMapping(“/notes/{id}”)<br>public Note getNoteById(@PathVarible(value = “id”) Long nodeId){<br>    return noteRespository.findById(noteId).<br>        orElseThrow(() -&gt; new ResourceNotFoundException(“Note”, “id”, noteId));<br>} </p>
<p>The @PathVariable annotation, as the name suggests, is used to bind a path variable with a method parameter.</p>
<p>we are throwing a ResourceNotFoundException whenever a Note with the given id is not found in the above method. </p>
<p>This will cause Spring Boot to return a 404 Not Found error to the client (Remember, we had added a @ResponseStatus(value = HttpStatus.NOT_FOUND) annotation to the ResourceNotFoundException class).</p>
<h3 id="4-Update-a-item-PUT-api-notes-id"><a href="#4-Update-a-item-PUT-api-notes-id" class="headerlink" title="4. Update a item(PUT /api/notes/{id})"></a>4. Update a item(PUT /api/notes/{id})</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// Update a Note</span><br><span class="line">@PutMapping(&quot;/notes/&#123;id&#125;&quot;)</span><br><span class="line">public Note updateNote(@PathVariable(value = &quot;id&quot;) Long noteId,</span><br><span class="line">                                        @Valid @RequestBody Note noteDetails) &#123;</span><br><span class="line"></span><br><span class="line">    Note note = noteRepository.findById(noteId)</span><br><span class="line">            .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Note&quot;, &quot;id&quot;, noteId));</span><br><span class="line"></span><br><span class="line">    note.setTitle(noteDetails.getTitle());</span><br><span class="line">    note.setContent(noteDetails.getContent());</span><br><span class="line"></span><br><span class="line">    Note updatedNote = noteRepository.save(note);</span><br><span class="line">    return updatedNote;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-Delete-a-Note-DELETE-api-notes-noteId"><a href="#5-Delete-a-Note-DELETE-api-notes-noteId" class="headerlink" title="5. Delete a Note (DELETE /api/notes/{noteId})"></a>5. Delete a Note (DELETE /api/notes/{noteId})</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@DeleteMapping(&quot;notes/&#123;id&#125;&quot;)</span><br><span class="line">public Repository&lt;?&gt; deleteNote(@PathVariable(value = &quot;id&quot;) Long noteId)&#123;</span><br><span class="line">	Note note noteRepository.findById(noteId)</span><br><span class="line">		.orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Note&quot;, &quot;id&quot;, noteId));</span><br><span class="line">	noteRepository.delete(note);</span><br><span class="line"></span><br><span class="line">	return ResponseEntity.ok().build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Running-the-app"><a href="#Running-the-app" class="headerlink" title="Running the app"></a>Running the app</h3><p>Command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mvn spring-boot:run</span><br></pre></td></tr></table></figure></p>
<p>Test the api with postman, which is same with golang as well as nodejs and python. </p>
<p>Still, having query about tranction! what if the sql operation involve in transaction<br>and need to rollback! that will be next….</p>
<p><a href="https://www.callicoder.com/spring-boot-rest-api-tutorial-with-mysql-jpa-hibernate/" target="_blank" rel="noopener">reference link</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pengw00.github.io/2019/05/31/stepsToBuildSpringbootRESTAPI/" data-id="cjwjzm5i2004l97zuzgz3kn94" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Springboot/">Springboot</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-systemDesignInterview" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/30/systemDesignInterview/" class="article-date">
  <time datetime="2019-05-30T04:17:56.000Z" itemprop="datePublished">2019-05-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/30/systemDesignInterview/">systemDesignInterview</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>My question</p>
<ol>
<li>Design Pastebin, a website where you can store and share text online for a set period of time.</li>
</ol>
<p>Note: Bit.ly is a similar service, with the distinction that Pastebin requires storing the paste contents instead of the original unshortened URL.</p>
<ul>
<li>note: Use it to share thoughts and resources, such as:</li>
</ul>
<ul>
<li>Features scope</li>
<li>API design</li>
<li>Pseudo code for specific components</li>
<li>Data model/schema</li>
<li>Back-of-the-envelope calculations</li>
<li>Reference links</li>
<li>Link to whiteboard or diagram such as <a href="https://sketchboard.me/new" target="_blank" rel="noopener">https://sketchboard.me/new</a></li>
</ul>
<ul>
<li>hints: interview structure</li>
<li>Establish the feature scope and constraints</li>
<li>Describe high-level architecture</li>
<li>Drill Down: design and scale core components</li>
<li>Scaling the design</li>
<li>Tradeoffs and future improvements</li>
</ul>
<h3 id="Note-and-Solution"><a href="#Note-and-Solution" class="headerlink" title="Note and Solution"></a>Note and Solution</h3><p>text -&gt; pastebin  no expire time</p>
<p>build a restful api with post method store text in the dabase</p>
<p>api and then when hit api return text in brower. </p>
<p>txt file, service parse the text file, get string, and store in the backend. </p>
<p>txt -&gt; api -&gt; user want the text, url get list of text or one recent text</p>
<p>front end -&gt; save txt file -&gt; backend -&gt; id-&gt; bit.ly service -&gt; url for text </p>
<ol>
<li>user table<br> user id</li>
</ol>
<p>2 text table<br>    text id<br>    text content<br>    date </p>
<p>solution1: url for txt -&gt; backend -&gt; response with txt file</p>
<ul>
<li>solution2: optimized high level design<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">client -&gt;(LB) server -&gt; readApi-&gt; cache  duplicate</span><br><span class="line">          server    readApi                  DB</span><br><span class="line">                                             DB</span><br><span class="line">                                             ...</span><br><span class="line">                                             ...</span><br><span class="line">          server       -&gt; writeApi-&gt;  (master and slave DB) </span><br><span class="line">nosql</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Pasterbin use case<br>Review this <a href="https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#design-pastebincom-or-bitly" target="_blank" rel="noopener">article</a> to learn about the use cases, high level design, core components and scale of a system like Pastebin.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pengw00.github.io/2019/05/30/systemDesignInterview/" data-id="cjwjzm5hd003s97zues0kgchm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SystemDesign/">SystemDesign</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-leetcode671SecondMinNodeInBinaryTree" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/29/leetcode671SecondMinNodeInBinaryTree/" class="article-date">
  <time datetime="2019-05-29T17:18:00.000Z" itemprop="datePublished">2019-05-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/29/leetcode671SecondMinNodeInBinaryTree/">leetcode671SecondMinNodeInBinaryTree</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Leetcode671-Second-Minimum-Node-In-a-Binary-Tree"><a href="#Leetcode671-Second-Minimum-Node-In-a-Binary-Tree" class="headerlink" title="Leetcode671. Second Minimum Node In a Binary Tree"></a>Leetcode671. Second Minimum Node In a Binary Tree</h3><p>//implementing in sort of bussiness logic in control component in<br>//flexibly used in front end or backend!!!</p>
<p>Analysis:</p>
<ol>
<li>using dfs or bfs, search the val in range (min1, ans), update ans = val if val in (min1, ans); </li>
<li>using dfs with divide and conque, dfs to get left and right of the subtree,  and only recursion on the condition of root.val == root.left.val or root.val == root.right.val;</li>
</ol>
<ul>
<li>solution one<h4 id="dfs"><a href="#dfs" class="headerlink" title="dfs"></a>dfs</h4></li>
</ul>
<figure class="highlight plain"><figcaption><span>solution&#123;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">	int min1;</span><br><span class="line">	long ans = Long.MAX_VALUE;</span><br><span class="line">	public int findSecondMinimumValue(TreeNode root)&#123;</span><br><span class="line">		if(root==null) return -1;</span><br><span class="line">		dfs(root);</span><br><span class="line">		return ans ==Long.MAX_VALUE?-1:(int)ans;</span><br><span class="line">	&#125;</span><br><span class="line">	//once root.val &gt; min1, we never drill deeply</span><br><span class="line">	//only root.val == min1, we dfs left and right</span><br><span class="line">	private void dfs(TreeNode root)&#123;</span><br><span class="line">		if(root!=null)&#123;</span><br><span class="line">			if(root.val&gt;min1 &amp;&amp; root.val &lt; ans)&#123;</span><br><span class="line">				ans = root.val;</span><br><span class="line">			&#125;else if(root.val == min1)&#123;</span><br><span class="line">				dfs(root.left);</span><br><span class="line">				dfs(root.right);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="bfs"><a href="#bfs" class="headerlink" title="bfs"></a>bfs</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class solution&#123;</span><br><span class="line">	public int findSecondMinimumValue(TreeNode root)&#123;</span><br><span class="line">		if(root==null) return -1;</span><br><span class="line">		int rootval = root.val;</span><br><span class="line">		long ans = Long.MAX_VALUE;</span><br><span class="line">		Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;();</span><br><span class="line">		queue.add(root);</span><br><span class="line">		while(!queue.isEmpty())&#123;</span><br><span class="line">			TreeNode tmp = queue.poll();</span><br><span class="line">			if(tmp.left != rootval &amp;&amp; head.val &lt; ans)&#123;</span><br><span class="line">				ans = head.val;</span><br><span class="line">			&#125;</span><br><span class="line">			if(tmp.left != null)&#123;</span><br><span class="line">				queue.add(tmp.left);</span><br><span class="line">				queue.add(tmp.right);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		return ans == Long.MAX_VALUE ? -1: ans;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>solution two <h3 id="divide-and-conquer-with-dfs"><a href="#divide-and-conquer-with-dfs" class="headerlink" title="divide and conquer with dfs"></a>divide and conquer with dfs</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//only left.val == root.val or right.val == root.val will be dfs</span><br><span class="line">//be familiar to implement condition returnning in order.</span><br><span class="line">class solution&#123;</span><br><span class="line">	public int findSecondMinimumValue(TreeNode root)&#123;</span><br><span class="line">		if(root==null) return -1;</span><br><span class="line">		if(root.left==null &amp;&amp; root.right==null) return -1;</span><br><span class="line">		int left = root.left.val;</span><br><span class="line">		int right = root.right.val;</span><br><span class="line">		if(root.left.val == root.val)&#123;</span><br><span class="line">			left = findSecondMinimumValue(root.left);</span><br><span class="line">			&#125;</span><br><span class="line">		if(root.right.val == root.val)&#123;</span><br><span class="line">			right = findSecondMinimumValue(root.right);</span><br><span class="line">		&#125;</span><br><span class="line">		if(left!=-1 &amp;&amp; right != -1)&#123;</span><br><span class="line">			return Math.min(left, rigth);</span><br><span class="line">		&#125;</span><br><span class="line">		if(left != -1)&#123;</span><br><span class="line">			return left;</span><br><span class="line">		&#125;else&#123;</span><br><span class="line">		return right;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pengw00.github.io/2019/05/29/leetcode671SecondMinNodeInBinaryTree/" data-id="cjwjzm5gt002z97zu1sr9sriw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/leetcode/">leetcode</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-leetcodeContest138" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/29/leetcodeContest138/" class="article-date">
  <time datetime="2019-05-29T17:14:29.000Z" itemprop="datePublished">2019-05-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/29/leetcodeContest138/">leetcodeContest138</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li><ol>
<li>Height Checker – easy</li>
</ol>
</li>
<li><ol start="2">
<li>Grumpy BookStore owner –medium</li>
</ol>
</li>
<li><ol start="3">
<li>Previous Permutation with One Step –medium</li>
</ol>
</li>
<li><ol start="4">
<li>Distant Barcodes –medium</li>
</ol>
</li>
</ul>
<h4 id="1-Height-Checker"><a href="#1-Height-Checker" class="headerlink" title="1. Height Checker"></a>1. Height Checker</h4><ul>
<li>solution<ul>
<li>sort and check differ</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">int heightChecker(vector&lt;int&gt;&amp; heights) &#123;</span><br><span class="line">       vector&lt;int&gt; tmp;</span><br><span class="line">       for(auto it: heights)&#123;</span><br><span class="line">           tmp.push_back(it);</span><br><span class="line">       &#125;</span><br><span class="line">       sort(heights.begin(), heights.end());</span><br><span class="line">       int res = 0;</span><br><span class="line">       for(int i = 0; i &lt; heights.size(); ++i)&#123;</span><br><span class="line">           if(heights[i]!=tmp[i])&#123;</span><br><span class="line">               cout&lt;&lt;heights[i] &lt;&lt;endl;</span><br><span class="line">               res++;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       return res;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-Grumpy-Bookstore-owner"><a href="#2-Grumpy-Bookstore-owner" class="headerlink" title="2. Grumpy Bookstore owner"></a>2. Grumpy Bookstore owner</h4><p>solution: sliding window<br> when ungrumpy, all is set setisfied, otherwise we sliding window to count the max setSatisfied.<br> code style similar to TwoSum, which is on-fly process!<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">maxSatisfied(vector&lt;int&gt;&amp; cs, vector&lt;int&gt; grumpy)&#123;</span><br><span class="line">	auto satisfied = 0, totalAddSatisfied = 0, addSatisfied = 0;</span><br><span class="line">	for(auto i = 0; i &lt; cs.size(); i++)&#123;</span><br><span class="line">		satisfied += grumpy[i] ? 0 : cs[i];</span><br><span class="line">		addSatisfied += grumpy[i]? cs[i] : 0;</span><br><span class="line">		if(i&gt;=X) addSatisfied -= grumpy[i-X]?cs[i-X]:0;</span><br><span class="line">		totalAddSatisfied = max(addSatisfied, totalAddSatisfied);</span><br><span class="line">	&#125;</span><br><span class="line">	return satisfied + totalAddSatisfied;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>My realtime solution during test, in which I pick out all the grumpy[i]==1 into a vector, and<br>process to max addSum. So the space complexity become bigger!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public:</span><br><span class="line">    int maxSatisfied(vector&lt;int&gt;&amp; customers, vector&lt;int&gt;&amp; grumpy, int X) &#123;</span><br><span class="line">        vector&lt;pair&lt;int,int&gt;&gt; mp;</span><br><span class="line">        int res=0;</span><br><span class="line">        for(int i = 0; i &lt; grumpy.size(); i++)&#123;</span><br><span class="line">            if(grumpy[i]==1)&#123;</span><br><span class="line">                mp.push_back(make_pair(i,customers[i]));</span><br><span class="line">            &#125;</span><br><span class="line">            res += grumpy[i]?0:customers[i];</span><br><span class="line">        &#125;</span><br><span class="line">        int tmp_res = res;</span><br><span class="line">        for(int i = 0; i &lt; mp.size(); ++i)&#123; </span><br><span class="line">            int j = i;</span><br><span class="line">            int tmp = tmp_res;</span><br><span class="line">            cout&lt;&lt;tmp&lt;&lt;endl;</span><br><span class="line">            while(j&lt;mp.size()&amp;&amp;mp[j].first-mp[i].first+1&lt;=X)&#123;</span><br><span class="line">                tmp += mp[j].second;</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">            res = max(res, tmp);</span><br><span class="line">        &#125;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="3-Previous-Permutation-with-One-Step"><a href="#3-Previous-Permutation-with-One-Step" class="headerlink" title="3. Previous Permutation with One Step"></a>3. Previous Permutation with One Step</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://pengw00.github.io/2019/05/29/leetcodeContest138/" data-id="cjwjzm5gs002w97zuc7dfdcim" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/contest/">contest</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-RabbitMQforMicroServicesCommunication" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/28/RabbitMQforMicroServicesCommunication/" class="article-date">
  <time datetime="2019-05-28T17:32:58.000Z" itemprop="datePublished">2019-05-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/28/RabbitMQforMicroServicesCommunication/">RabbitMQforMicroServicesCommunication</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Using-RabbitMQ-for-MicroSerices-Communication"><a href="#Using-RabbitMQ-for-MicroSerices-Communication" class="headerlink" title="Using RabbitMQ for MicroSerices Communication"></a>Using RabbitMQ for MicroSerices Communication</h2><p>Decomposing your monolith app into multiple, totally independently deployable and scalable services.</p>
<p>The smaller apps are more modular with well-defined boundaries, can be written using different languages/frameworks, fail in isolation so that the entire app doesn’t go down (no SPOF).<br>Take a Cinema ticketing example:<br><img src="https://github.com/pengw00/pengw00.github.io/raw/master/image/microservices_architect.png" alt="image"></p>
<h3 id="microservices-based-architecture"><a href="#microservices-based-architecture" class="headerlink" title="microservices-based architecture"></a>microservices-based architecture</h3><p>bad practce to have clients to communicate with each of the service instance separately. </p>
<h4 id="Each-service-has-its-own-storage"><a href="#Each-service-has-its-own-storage" class="headerlink" title="Each service has its own storage"></a>Each service has its own storage</h4><p>Enables decoupling<br>Some queries will then need to join data that is owned by multiple services. To avoid this major performance hit, data may be replicated and sharded. This principle is not just tolerated in microservices, but encouraged.</p>
<h4 id="a-single-request-should-ideally-only-invoke-one-service-to-fetch-the-response"><a href="#a-single-request-should-ideally-only-invoke-one-service-to-fetch-the-response" class="headerlink" title="a single request should, ideally, only invoke one service to fetch the response"></a>a single request should, ideally, only invoke one service to fetch the response</h4><p>not always possible,  mechanisms like gRPC, Thrift or even simple HTTP (as in our example) are commonly employed when necessary. As you may have guessed, this implies that data will have to be replicated across our services. Say, the GET /catalog/&lt;<cityid>&gt; endpoint is also supposed to return the premieres at each cinema in the city at that time. With our new strategy, the premieres will have to be stored in the database for the Cinema Catalog service as well. Hence, point iii).</cityid></p>
<h4 id="REST-calls-made-to-our-API-gateway"><a href="#REST-calls-made-to-our-API-gateway" class="headerlink" title="REST calls made to our API gateway"></a>REST calls made to our API gateway</h4><p>request ==&gt; gateway ===&gt; complies result || response to clients</p>
<p>Communication among services like this on one client request to the app should not happen. Otherwise we’ll be sacrificing performance, on account of another HTTP round-trip, for the newly introduced modularity.</p>
<h3 id="Communicating-Asynchronously-Between-The-Services"><a href="#Communicating-Asynchronously-Between-The-Services" class="headerlink" title="Communicating Asynchronously Between The Services"></a>Communicating Asynchronously Between The Services</h3><p>the premieres change as a result of some CRUD operation on the Movies service. To keep the data in sync, that update event will have to be emitted and applied to the Cinema Catalog service as well</p>
<h5 id="Try-to-picture-our-microservices-as-a-cluster-of-state-machines-where-updates-in-states-may-have-to-be-communicated-across-the-cluster-to-achieve-eventual-consistency"><a href="#Try-to-picture-our-microservices-as-a-cluster-of-state-machines-where-updates-in-states-may-have-to-be-communicated-across-the-cluster-to-achieve-eventual-consistency" class="headerlink" title="Try to picture our microservices as a cluster of state machines where updates in states may have to be communicated across the cluster to achieve eventual consistency."></a>Try to picture our microservices as a cluster of state machines where updates in states may have to be communicated across the cluster to achieve eventual consistency.</h5><p>Of course, we should never expect our end-users to have to wait longer for requests to finish and sacrifice their time for modularity to our benefit. Thereby, all of this communication has to be non-blocking. ### And that’s where RabbitMQ comes in. ###</p>
<p>RabbitMQ: implements the AMQP messaging protocol.  first, you install a RabbitMQ server instance (broker) on a system. Then a publisher/producer program connects to this server and sends out a message. RabbitMQ queues that message and siphons it off to a single or multiple subscriber/consumer programs that are out there listening on the RabbitMQ server.</p>
<p>microservices are way more complex and we won’t be covering critical topics like fault tolerance because of the intricacy of distributed systems, the full role of the API gateway, Service Discovery, data consistency patterns like Sagas, preventing service failure cascading using Circuit Breakers, health checks and architectural patterns like CQRS. Not to mention how to decide whether microservices will work for you or not.</p>
<h2 id="How-RabbitMQ-Works"><a href="#How-RabbitMQ-Works" class="headerlink" title="How RabbitMQ Works"></a>How RabbitMQ Works</h2><p>Massages published to an exchange inside the RabbitMQ broker, then exchange copies of that message to queues on basis f certain developer-defined rules called binding. This journey called Routing. </p>
<p>the direction is non-blocking message transmissions. Not exactly. There are four different types of exchanges and each, along with the bindings, defines a routing algorithm. “Routing algorithm” means, essentially, how the messages are distributed among the queues. Going into the details about each type might be an overkill here, so I’ll just expand on the one we’ll be using: the topic exchange.</p>
<p>For an exchange to push a message onto a queue, that queue must be bound to the exchange. We can create multiple exchanges with unique names, explicitly. However, when you deploy RabbitMQ it comes with a default, nameless exchange. The exact way a binding key works, again, depends on the type of the exchange. Here’s how it works with a topic exchange:</p>
<ol>
<li><p>A queue is bound to an exchange using a string pattern (the binding key)<br>The published message is delivered to the exchange along with a routing key.</p>
</li>
<li><p>The exchange checks which queues match the routing key based on the binding key pattern defined before.</p>
</li>
</ol>
<p><img src="https://github.com/pengw00/pengw00.github.io/raw/master/image/rabbitMQ.png" alt="image"><br><a href="https://www.rabbitmq.com/tutorials/tutorial-five-python.html" target="_blank" rel="noopener">source:</a></p>
<p>Any message with a routing key ”quick.orange.rabbit” will be delivered to both queues. However, messages with ”lazy.brown.fox” will only reach Q2. Those with a routing key not matching any pattern will be lost.</p>
<p>For some perspective, let’s just skim over two other exchange types:</p>
<ul>
<li>Fanout exchange: Messages sent to this kind of exchange will be sent to ALL the queues bound to it. The routing key, if provided, will be completely ignored. This can be used, for example, for broadcasting global configuration updates across a distributed system.</li>
<li>Direct exchange (simplest): Sends the message to the queue whose binding key is exactly equal to the given routing key. If there are multiple consumers listening on the queue, then the messages will be load-balanced among them, hence, it is commonly used to distribute tasks between multiple workers in a round robin manner.</li>
</ul>
<p>//still need to follow up docker tutorial! and Circle.ci</p>
<p><a href="https://codeburst.io/using-rabbitmq-for-microservices-communication-on-docker-a43840401819" target="_blank" rel="noopener">https://codeburst.io/using-rabbitmq-for-microservices-communication-on-docker-a43840401819</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pengw00.github.io/2019/05/28/RabbitMQforMicroServicesCommunication/" data-id="cjwjzm5fn000s97zus436w1b9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/microservice/">microservice</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-rabbitMQForMicroServices" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/28/rabbitMQForMicroServices/" class="article-date">
  <time datetime="2019-05-28T07:27:07.000Z" itemprop="datePublished">2019-05-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/28/rabbitMQForMicroServices/">rabbitMQForMicroServices</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Backend-Decouple-Stratergy"><a href="#Backend-Decouple-Stratergy" class="headerlink" title="Backend Decouple Stratergy"></a>Backend Decouple Stratergy</h2><ol>
<li>A message queue provide an asynchronous communications protocol - You have the option to send a message from one service to another without having to know if another service is able to handle it immediately or not. Messages can wait until the responsible service is ready. A service publishing a message does not need know anything about the inner workings of the services that will process that message. This way of handling messages decouple the producer from the consumer.</li>
</ol>
<p>A message queue will keep the processes in your application separated and independent of each other; this way of handling messages could create a system that is easy to maintain and easy to scale.</p>
<p>Source<br><a href="https://stackoverflow.com/questions/45208766/microservices-why-use-rabbitmq" target="_blank" rel="noopener">https://stackoverflow.com/questions/45208766/microservices-why-use-rabbitmq</a></p>
<p><a href="https://www.cloudamqp.com/blog/2017-09-25-breaking-down-a-monolithic-system-into-microservices.html" target="_blank" rel="noopener">https://www.cloudamqp.com/blog/2017-09-25-breaking-down-a-monolithic-system-into-microservices.html</a><br>Here is a story explaining how Parkster (a digital parking service) are breaking down their system into multiple microservices by using RabbitMQ.</p>
<p>a story about the usage of RabbitMQ in an event-based microservices architecture to support 100 million users a month.<br><a href="https://www.cloudamqp.com/blog/2019-01-18-softonic-userstory-rabbitmq-eventbased-communication.html" target="_blank" rel="noopener">https://www.cloudamqp.com/blog/2019-01-18-softonic-userstory-rabbitmq-eventbased-communication.html</a></p>
<p>And finally a link to Kontena, about why they chose RabbitMQ for their microservice architecture: “Because we needed a stable, manageable and highly-available solution for messaging.”.<br><a href="https://ghost.kontena.io/event-driven-microservices-with-rabbitmq-and-ruby/" target="_blank" rel="noopener">https://ghost.kontena.io/event-driven-microservices-with-rabbitmq-and-ruby/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pengw00.github.io/2019/05/28/rabbitMQForMicroServices/" data-id="cjwjzm5gx003897zut5slursf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MicroService/">MicroService</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-practices-to-boost-react-performance" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/27/practices-to-boost-react-performance/" class="article-date">
  <time datetime="2019-05-27T22:58:06.000Z" itemprop="datePublished">2019-05-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/27/practices-to-boost-react-performance/">practices to boost react performance</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Practices to Boost React Performance</p>
<h3 id="1-React-under-the-hood"><a href="#1-React-under-the-hood" class="headerlink" title="1. React under the hood?"></a>1. React under the hood?</h3><p>React DOM wasn’t created with dynamic UI in mind. When the DOM needs to be updated, it has to go through a Reflow/Layout stage and the DOM nodes need to be repainted, which is slow. When you have an application with thousands of <div>s, there is a severe performance issue.</div></p>
<p>React uses a different strategy to update your DOM. The process is popularly known as Reconciliation. When your browser initially renders your application, React builds a tree of elements. Let’s imagine that this how React builds its tree.</p>
<p>But what when a component’s state changes, the render() method returns a different tree of React elements. React has to calculate the changes it has to make to the DOM, and it does so by creating a virtual DOM and then comparing that to the real DOM.</p>
<p>The good thing about virtual DOM is that it updates only the part of the DOM that needs to be updated. React uses a diffing algorithm that tries to minimize the number of operations to transform the tree. However, the diffing algorithm isn’t perfect. Let’s say that values of the nodes in yellow has changed, and needs to be updated.</p>
<p>However, the diffing algorithm isn’t perfect. If the updated props were passed in from the com React ends up updating entire subtree like this.</p>
<p>As you can see, React is unnecessarily rendering and diffing component subtrees. Instead, there are ways that you can re-render only the nodes that are directly affected by the props change and not the entire subtree.</p>
<p>When React wastes resources and CPU on rendering components that haven’t changed, we call it wasted renders. Wasted renders can throttle performance — but if we could streamline the diffing process further, we might be able to boost the speed significantly. The rest of the post will cover how to boost React performance.</p>
<p>Benchmark your Application to Improve Performance — Tools and Techniques</p>
<p>React used to have a tool called react-addon-perf that was recently retired and it isn’t available in the latest version of React. Instead, React recommends using the browTo create a performance profile for your application, follow the steps below:</p>
<p>Make sure that you’ve exported the JS with source-maps or that you’re in development mode.<br>Temporarily disable all React extensions, like React DevTools, because they can impact the results.<br>Set up the profiling tool. Open the Chrome developer tools and go to the performance tab. You can slow down the JavaScript execution so that the performance issues become more apparent.<br>Now, navigate to the page that you would like to profile and then press the red button that says “Record.” If you would like to create a performance trace of the initial render, you should choose the start profiling and reload button. Now, perform the desired action and stop the recording.<br>Chrome will return visualization of the performance data in vertical bands. Zoom in onto the User Timing band to see each component’s performance.<br>You can select individual components and the bottom up tab will give you insights into activities that take up most of the time.ser’s profiling tools to get the same result.</p>
<p>To create a performance profile for your application, follow the steps below:</p>
<p>Make sure that you’ve exported the JS with source-maps or that you’re in development mode.<br>Temporarily disable all React extensions, like React DevTools, because they can impact the results.<br>Set up the profiling tool. Open the Chrome developer tools and go to the performance tab. You can slow down the JavaScript execution so that the performance issues become more apparent.<br>Now, navigate to the page that you would like to profile and then press the red button that says “Record.” If you would like to create a performance trace of the initial render, you should choose the start profiling and reload button. Now, perform the desired action and stop the recording.<br>Chrome will return visualization of the performance data in vertical bands. Zoom in onto the User Timing band to see each component’s performance.<br>You can select individual components and the bottom up tab will give you insights into activities that take up most of the time.</p>
<p>a library, known as why-did-you-update, that is an excellent tool for component analysis. It gives you a visualization of the props before and after and notifies you about components that shouldn’t have been rerendered.To install the tool, run<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save why-did-you-update</span><br></pre></td></tr></table></figure></p>
<p>Add this code into your index.js file.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line"></span><br><span class="line">if (process.env.NODE_ENV !== &apos;production&apos;) &#123;</span><br><span class="line">  const &#123;whyDidYouUpdate&#125; = require(&apos;why-did-you-update&apos;);</span><br><span class="line">  whyDidYouUpdate(React);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="2-Prevent-Unnecessary-Rendering"><a href="#2-Prevent-Unnecessary-Rendering" class="headerlink" title="2. Prevent Unnecessary Rendering"></a>2. Prevent Unnecessary Rendering</h3><p>React re-renders a component when its props or state gets updated:default behaviors.</p>
<p>A. shouldComponentUpdate(). This lifecycle hook doesn’t get invoked during the initial render, but only on subsequent re-renders. shouldComponentUpdate() is triggered when the props have changed and it returns true by default.</p>
<p>If you’re sure that your component doesn’t need to re-render regardless of whether the props have updated or not, you can return false to skip the rendering process.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class ListItem extends Component &#123;</span><br><span class="line">    shouldComponentUpdate(nextProps, nextState) &#123;</span><br><span class="line">     return false</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">    // Let the new props flow, I am not rendering again.</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Alternatively, if you need to update only when certain props are updated, you can do something like this:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class ListItem extends Component &#123;</span><br><span class="line">    shouldComponentUpdate(nextProps, nextState) &#123;</span><br><span class="line">        return nextProps.isFavourite != this.props.isFavourite;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Pure-Component"><a href="#Pure-Component" class="headerlink" title="Pure Component"></a>Pure Component</h3><p>A React.PureComponent is pretty much like a normal Component but the key difference being, it handles the shouldComponentUpdate() method for you. When the props or the state update, PureComponent will do a shallow comparison on them and update the state.</p>
<p>So, what is shallow comparison? Here’s excerpt from an answer on StackOverflow:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Shallow compare does check for equality. When comparing scalar values (numbers, strings) it compares their values. When comparing objects, it does not compare their&apos;s attributes - only their references are compared (e.g. &quot;do they point to same object?).</span><br></pre></td></tr></table></figure></p>
<p>reference: immutable.js is coming!!! //topics involved here.</p>
<p>Personally, you should use PureComponent only if you have a clear understanding of how immutable data works and when to use forceUpdate() to update your component.</p>
<h2 id="3-Debouncing-input-handlers"><a href="#3-Debouncing-input-handlers" class="headerlink" title="3.  Debouncing input handlers"></a>3.  Debouncing input handlers</h2><p>This concept is not specific to React, or any other front-end library. Debouncing has long been used in JavaScript to successfully run expensive tasks without hindering performance. </p>
<p>A debounce function can be used to delay certain events so that it doesn’t get fired up every millisecond. This helps you limit the number of API calls, DOM updates, and time consuming tasks. For instance, when you’re typing something into the search menu, there is a short delay before all of the suggestions pop up. The debounce function limits the calls to onChange event handler. In many cases, the API request is usually made after the user has stopped typing.</p>
<p>Let me focus more on the debouncing strategy for input handlers and DOM updates. Input handlers are a potential cause of performance issues. Let me explain how:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">export default class SearchBar extends React.Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.onChange = this.onChange.bind(this);</span><br><span class="line">  &#125;</span><br><span class="line">  onChange(e) &#123;</span><br><span class="line">    this.props.onChange(e.target.value);</span><br><span class="line">  &#125;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;label&gt; Search &lt;/label&gt;</span><br><span class="line">      &lt;input onChange=&#123;this.onChange&#125;/&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>On every input change, we’re calling this.props.onChange(). What if there is a long-running sequence of actions inside that callback? That’s where debounce comes it handy. You can do something like this:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import &#123;debounce&#125; from &apos;throttle-debounce&apos;;</span><br><span class="line"></span><br><span class="line">export default class SearchBarWithDebounce extends React.Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.onChange = this.onChange.bind(this);</span><br><span class="line">    this.onChangeDebounce = debounce( 300, </span><br><span class="line">         value =&gt; this.props.onChange(value)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  onChange(e) &#123;</span><br><span class="line">    this.onChangeDebounce(e.target.value);</span><br><span class="line">  &#125;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;input onChange=&#123;this.onChange&#125;/&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>The DOM update happens after the user has finished typing, which is exactly what we need. If you’re curious about debouncing AJAX calls, you can do something like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import &#123;debounce&#125; from &apos;throttle-debounce&apos;;</span><br><span class="line"></span><br><span class="line">export default class Comp extends Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.callAPI = debounce(500, this.callAPI);</span><br><span class="line">  &#125;</span><br><span class="line">  onChange(e) &#123;</span><br><span class="line">    this.callAPI(e.target.value);</span><br><span class="line">  &#125;</span><br><span class="line">  callAjax(value) &#123;</span><br><span class="line">    console.log(&apos;value :: &apos;, value);</span><br><span class="line">    // AJAX call here</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; onKeyUp=&#123;this.onChange.bind(this)&#125;/&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Optimize-React-for-Production"><a href="#Optimize-React-for-Production" class="headerlink" title="Optimize React for Production"></a>Optimize React for Production</h3><p>A minified production build is faster and more optimized for heavy workloads, whereas a development build is meant to highlight errors and warnings in the console. Although these warnings help the developer debug errors, they can directly impact the performance of the application.</p>
<p>You can use the Network tab in your Developer Tools to see what is actually slowing you down. React bundle size is usually the culprit, and you need to minify it before you push it for production. If you bootstrapped the application using create-react-app, you can get a production build by running npm run build.</p>
<p>When you run this, create-react-app will minify the code, obfuscate/uglify it (that happens as a result of minification) and generate source maps. The end user is able to load the scripts faster than the version that was not minified. The source maps generated are particularly handy if you decide to navigate around the code through the Developer console. The source maps are loaded on demand and you can delete it before actual deployment.</p>
<p>If you’re using webpack, you can build a production environment by running webpack -p. React also offers production-ready single files for React and ReactDOM.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script </span><br><span class="line">src=&quot;https://unpkg.com/react@16/umd/react.production.min.js&quot;&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;https://unpkg.com/react-dom@16/umd/react-dom.production.min.js&quot;&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>There are ways to reduce the bundle size even further, like using Preact, but you need to take that path only if the initial load time is noticeably slow.</p>
<p>Optimizing your application’s resource is another thing that you need to consider. This has nothing to do with React, but can indeed speed up your application. Resources such as images, icons and other media files can slow down the application if they are rendered uncompressed. The Network tab in the Developer Tools should give you insights into that too. If you’re using static resources, optimize and compress them before pushing them into the server. Use a CDN if your server and the potential users are not in close proximity. Here is a nice article written by David Lazic that covers optimizing the production build further. <a href="https://medium.com/netscape/webpack-3-react-production-build-tips-d20507dba99a" target="_blank" rel="noopener">https://medium.com/netscape/webpack-3-react-production-build-tips-d20507dba99a</a></p>
<h3 id="Micro-optimizations-To-Boost-React-Performance"><a href="#Micro-optimizations-To-Boost-React-Performance" class="headerlink" title="Micro-optimizations To Boost React Performance"></a>Micro-optimizations To Boost React Performance</h3><p>Micro-optimizations are certain details that won’t have an immediate impact on your application, but will help you in the long run. There are many-micro optimizations around that you should know about. Some of these practices also help you improve the readability and maintainability of your codebase.</p>
<h4 id="Functional-components-vs-Class-components"><a href="#Functional-components-vs-Class-components" class="headerlink" title="Functional components vs. Class components"></a>Functional components vs. Class components</h4><p>Functional components are easier to write and read, and they are particularly useful for building the UI or the presentational layer. Class components, on the other hand, are ideal for building containers. The containers make API calls, dispatch actions to the store, and use the state to hold data. They then pass the data as props to the presentational components.</p>
<p>Until React v16 was released, both the functional components and the class components had the same code path. Although the functional components appeared to have fewer lines of code, they were neither optimized nor offered speed improvements because they were converted to Class components under the hood. However, the scenario has changed with the release of V6.</p>
<p>Here is an excerpt from the official docs:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Functional components in React 16 don&apos;t go through the same code path as class components, unlike in previous versions, where they were converted to classes and would have the same code path. Class components have additional checks required and overhead in creating the instances that simple functions don&apos;t have.</span><br></pre></td></tr></table></figure></p>
<h3 id="Bind-Function-Early"><a href="#Bind-Function-Early" class="headerlink" title="Bind Function Early"></a>Bind Function Early</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Button extends React.Component &#123;</span><br><span class="line">  handleClick() &#123;</span><br><span class="line">    console.log(&apos;Yay!&apos;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;button onClick=&#123;this.handleClick.bind(this)&#125;/&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Arrow functions inside the render method is bad too, unfortunately.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Button extends React.Component &#123;</span><br><span class="line">  handleClick() &#123;</span><br><span class="line">    console.log(&apos;Yay&apos;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;button onClick=&#123;() =&gt; this.handleClick()&#125;/&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>The process of creating a new function is usually fast and won’t slow you down, to be honest. But if you’ve implemented shouldComponentUpdate() or if you’re using PureComponent base class, React sees new props on each render and the child components are re-rendered unnecessarily.</p>
<p>To fix this issue, you can bind functions early like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class Button extends React.Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line"></span><br><span class="line">    this.handleClick = this.handleClick.bind(this);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClick() &#123;</span><br><span class="line">    console.log(&apos;Yay!&apos;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;button onClick=&#123;this.handleClick&#125;/&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Alternatively you can use something like class instance fields. However, it’s an experimental feature that has not yet made it to the standards. But you can use it in your project with the help of Babel.</p>
<h3 id="Final-Words"><a href="#Final-Words" class="headerlink" title="Final Words"></a>Final Words</h3><p>In this post, I’ve covered some of the popular and clever ways to boost React’s performance. On a general note, you don’t have to be concerned until you start seeing actual bottlenecks. I prefer to go with the “Don’t optimize unless you need to” approach. That’s why I’d recommend benchmarking components first and measuring whether they are actually slowing you down. Your browser’s developer tools will also give insights into other non-React factors that could be affecting your app. Use that as a starting point and that should help you get started.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pengw00.github.io/2019/05/27/practices-to-boost-react-performance/" data-id="cjwjzm5i0004h97zu99lvj5h3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-leetcode465" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/25/leetcode465/" class="article-date">
  <time datetime="2019-05-25T18:05:33.000Z" itemprop="datePublished">2019-05-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/25/leetcode465/">leetcode465</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Optimal Account Balancing, hard<br>Settling Multiple Debts Efficiently: An Invitation to Computing Science by T. Verhoeff, June 2003. <a href="http://www.mathmeth.com/tom/files/settling-debts.pdf" target="_blank" rel="noopener">http://www.mathmeth.com/tom/files/settling-debts.pdf</a><br>The question can be transferred to a 3-partition problem, which is NP-Complete.</p>
<p>recursion + backtracking, get the total transaction and then dfs and backtracing every trans.<br>Core code:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">int backtrack(Long[] debts, int pos, int count)&#123;</span><br><span class="line">        while(pos &lt; debts.length &amp;&amp; debts[pos] == 0) pos++;</span><br><span class="line">        if (pos &gt;= debts.length) &#123;</span><br><span class="line">            return count;</span><br><span class="line">        &#125;</span><br><span class="line">        int res = Integer.MAX_VALUE;</span><br><span class="line">        for(int i = pos + 1; i &lt; debts.length; i++)&#123;</span><br><span class="line">            if(debts[pos] * debts[i] &lt; 0)&#123;</span><br><span class="line">              debts[i] += debts[pos];</span><br><span class="line">              res = Math.min(res, helper(debts, pos + 1, count + 1));</span><br><span class="line">              debts[i] = debts[i] - debts[pos];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pengw00.github.io/2019/05/25/leetcode465/" data-id="cjwjzm5gk002h97zuu9m17p05" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/leetcode/">leetcode</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-edit-distance-modified-version-bus-station-problemq" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/21/edit-distance-modified-version-bus-station-problemq/" class="article-date">
  <time datetime="2019-05-21T17:55:09.000Z" itemprop="datePublished">2019-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/21/edit-distance-modified-version-bus-station-problemq/">edit distance modified version-bus station problem q </a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Edit Distance problem(leetcode)</p>
<p>problem: one dimension bus station, given a list of passangers: list = [0, 1,2, 4, 6, 7], they are all the passagers in One Dismension. And given a M as well, which means that the max time that the bus can stop, return in what stops for the car that makes the passager can pick up the bus in shortest distance.</p>
<p>logic: dp similar to min distance to multiple gas station.<br>we need to build stops to make the minimum distance.<br>解法： 求dp[i,j]表示前i个人（inclusive）和 j表示目前的公交站个数。<br>dp[i,j] = min(dp[k,j-1], min distance for people after k with one stop)</p>
<p>base: only one stop<br>optimal: median position</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pengw00.github.io/2019/05/21/edit-distance-modified-version-bus-station-problemq/" data-id="cjwjzm5g5001n97zupbrmv1ps" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/leetcode/">leetcode</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ActiveMQ/">ActiveMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Contest/">Contest</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-pattern/">Design pattern</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dynamic-Programming/">Dynamic Programming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Front-end/">Front-end</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MicroService/">MicroService</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redux/">Redux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ResponsiveWebDesign/">ResponsiveWebDesign</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Java/">Spring&Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Springboot/">Springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Study-plan/">Study plan</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SystemDesign/">SystemDesign</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm/">algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/career/">career</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/contest/">contest</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/">database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hackrrank/">hackrrank</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hibernate/">hibernate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/leetcode/">leetcode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/microservice/">microservice</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ActiveMQ/" style="font-size: 10px;">ActiveMQ</a> <a href="/tags/Algorithm/" style="font-size: 10px;">Algorithm</a> <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/Contest/" style="font-size: 10px;">Contest</a> <a href="/tags/Design-pattern/" style="font-size: 12px;">Design pattern</a> <a href="/tags/Dynamic-Programming/" style="font-size: 10px;">Dynamic Programming</a> <a href="/tags/Front-end/" style="font-size: 10px;">Front-end</a> <a href="/tags/JS/" style="font-size: 10px;">JS</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Javascript/" style="font-size: 12px;">Javascript</a> <a href="/tags/MicroService/" style="font-size: 10px;">MicroService</a> <a href="/tags/React/" style="font-size: 18px;">React</a> <a href="/tags/Redux/" style="font-size: 10px;">Redux</a> <a href="/tags/ResponsiveWebDesign/" style="font-size: 10px;">ResponsiveWebDesign</a> <a href="/tags/Spring/" style="font-size: 12px;">Spring</a> <a href="/tags/Spring-Java/" style="font-size: 10px;">Spring&Java</a> <a href="/tags/Springboot/" style="font-size: 10px;">Springboot</a> <a href="/tags/Study-plan/" style="font-size: 10px;">Study plan</a> <a href="/tags/SystemDesign/" style="font-size: 12px;">SystemDesign</a> <a href="/tags/algorithm/" style="font-size: 16px;">algorithm</a> <a href="/tags/angular/" style="font-size: 10px;">angular</a> <a href="/tags/career/" style="font-size: 10px;">career</a> <a href="/tags/contest/" style="font-size: 10px;">contest</a> <a href="/tags/database/" style="font-size: 10px;">database</a> <a href="/tags/hackrrank/" style="font-size: 10px;">hackrrank</a> <a href="/tags/hibernate/" style="font-size: 10px;">hibernate</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/leetcode/" style="font-size: 20px;">leetcode</a> <a href="/tags/microservice/" style="font-size: 10px;">microservice</a> <a href="/tags/react/" style="font-size: 14px;">react</a> <a href="/tags/spring/" style="font-size: 10px;">spring</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/06/05/Design-a-transportation-payment-method/">Design a transportation payment method</a>
          </li>
        
          <li>
            <a href="/2019/06/05/Ways-to-center-CSS-element/">Ways to center CSS element</a>
          </li>
        
          <li>
            <a href="/2019/06/05/Redux-starter-kit-usage/">Redux-starter-kit usage</a>
          </li>
        
          <li>
            <a href="/2019/06/04/Leetcode-485-487-1004-Max-Consecutive-One/">Leetcode.485&amp;487&amp;1004 Max Consecutive One</a>
          </li>
        
          <li>
            <a href="/2019/06/04/leetcode-272-Closest-Binary-Search/">leetcode.272 Closest Binary Search</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 David w00<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>